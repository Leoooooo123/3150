<!DOCTYPE HTML>
<html lang="en" >
    
    <head>
        
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <title>Passing Arguments | Introduction to pThread</title>
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="generator" content="GitBook 2.6.7">
        
        
        <meta name="HandheldFriendly" content="true"/>
        <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-status-bar-style" content="black">
        <link rel="apple-touch-icon-precomposed" sizes="152x152" href="gitbook/images/apple-touch-icon-precomposed-152.png">
        <link rel="shortcut icon" href="gitbook/images/favicon.ico" type="image/x-icon">
        
    <link rel="stylesheet" href="gitbook/style.css">
    
        
        <link rel="stylesheet" href="gitbook/plugins/gitbook-plugin-highlight/website.css">
        
    
        
        <link rel="stylesheet" href="gitbook/plugins/gitbook-plugin-search/search.css">
        
    
        
        <link rel="stylesheet" href="gitbook/plugins/gitbook-plugin-fontsettings/website.css">
        
    
    
        <link rel="stylesheet" href="./styles/website.css">
    

        
    
    
    <link rel="next" href="./example-sorting-common-integers-in-two-lists.html" />
    
    
    <link rel="prev" href="./solution-deadlock.html" />
    

        
    </head>
    <body>
        
        
    <div class="book"
        data-level="7"
        data-chapter-title="Passing Arguments"
        data-filepath="passing-arguments.md"
        data-basepath="."
        data-revision="Mon Mar 27 2017 09:24:44 GMT+0800 (HKT)"
        data-innerlanguage="">
    

<div class="book-summary">
    <nav role="navigation">
        <ul class="summary">
            
            
            
            

            

            
    
        <li class="chapter " data-level="0" data-path="index.html">
            
                
                    <a href="./index.html">
                
                        <i class="fa fa-check"></i>
                        
                        Introduction
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="1" data-path="configuration.html">
            
                
                    <a href="./configuration.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.</b>
                        
                        Configuration
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="2" data-path="compile.html">
            
                
                    <a href="./compile.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.</b>
                        
                        Compile
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="3" data-path="race-condition.html">
            
                
                    <a href="./race-condition.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.</b>
                        
                        Race Condition
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="4" data-path="solution-race-condition.html">
            
                
                    <a href="./solution-race-condition.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>4.</b>
                        
                        Solution: Race Condition
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="5" data-path="deadlock.html">
            
                
                    <a href="./deadlock.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>5.</b>
                        
                        Deadlock
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="6" data-path="solution-deadlock.html">
            
                
                    <a href="./solution-deadlock.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>6.</b>
                        
                        Solution: Deadlock
                    </a>
            
            
        </li>
    
        <li class="chapter active" data-level="7" data-path="passing-arguments.html">
            
                
                    <a href="./passing-arguments.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>7.</b>
                        
                        Passing Arguments
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="8" data-path="example-sorting-common-integers-in-two-lists.html">
            
                
                    <a href="./example-sorting-common-integers-in-two-lists.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>8.</b>
                        
                        Example: Sorting Common Integers in Two Lists
                    </a>
            
            
        </li>
    


            
            <li class="divider"></li>
            <li>
                <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
                    Published with GitBook
                </a>
            </li>
            
        </ul>
    </nav>
</div>

    <div class="book-body">
        <div class="body-inner">
            <div class="book-header" role="navigation">
    <!-- Actions Left -->
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="./" >Introduction to pThread</a>
    </h1>
</div>

            <div class="page-wrapper" tabindex="-1" role="main">
                <div class="page-inner">
                
                
                    <section class="normal" id="section-">
                    
                        <h1 id="passing-arguments">Passing Arguments</h1>
<p>Passing arguments to pthread function</p>
<pre><code class="lang-c"><span class="hljs-preprocessor">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdio.h&gt;</span></span>
<span class="hljs-preprocessor">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;pthread.h&gt;</span></span>

<span class="hljs-function"><span class="hljs-keyword">void</span> * <span class="hljs-title">hello</span><span class="hljs-params">(<span class="hljs-keyword">void</span> *input)</span> </span>{
    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%s\n&quot;</span>, (<span class="hljs-keyword">char</span> *)input);
    pthread_exit(<span class="hljs-literal">NULL</span>);
}

<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">(<span class="hljs-keyword">void</span>)</span> </span>{
    <span class="hljs-keyword">pthread_t</span> tid;
    pthread_create(&amp;tid, <span class="hljs-literal">NULL</span>, hello, <span class="hljs-string">&quot;hello world&quot;</span>);
    pthread_join(tid, <span class="hljs-literal">NULL</span>);
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</code></pre>
<p>We use &quot;pthread_create&quot; to create a thread, thread id is the first argument, NULL is the second argument(which should be some attribute, but we may not use it), the third argument is the function, then the last argument is what we want to pass to the new thread.
When we define the function hello(void *), this function can accept a pointer as an argument.
In this example we just pass one string to the function, what if we want to pass more than one argument? We can use structure in c.</p>
<pre><code class="lang-c"><span class="hljs-preprocessor">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;pthread.h&gt;</span></span>
<span class="hljs-preprocessor">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdio.h&gt;</span></span>
<span class="hljs-preprocessor">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdlib.h&gt;</span></span>

<span class="hljs-keyword">struct</span> args {
    <span class="hljs-keyword">char</span>* name;
    <span class="hljs-keyword">int</span> age;
};

<span class="hljs-function"><span class="hljs-keyword">void</span> *<span class="hljs-title">hello</span><span class="hljs-params">(<span class="hljs-keyword">void</span> *input)</span> </span>{
    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;name: %s\n&quot;</span>, ((<span class="hljs-keyword">struct</span> args*)input)-&gt;name);
    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;age: %d\n&quot;</span>, ((<span class="hljs-keyword">struct</span> args*)input)-&gt;age);
}

<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-keyword">struct</span> args *Allen = (<span class="hljs-keyword">struct</span> args *)<span class="hljs-built_in">malloc</span>(<span class="hljs-keyword">sizeof</span>(<span class="hljs-keyword">struct</span> args));
    <span class="hljs-keyword">char</span> allen[] = <span class="hljs-string">&quot;Allen&quot;</span>;
    Allen-&gt;name = allen;
    Allen-&gt;age = <span class="hljs-number">20</span>;

    <span class="hljs-keyword">pthread_t</span> tid;
    pthread_create(&amp;tid, <span class="hljs-literal">NULL</span>, hello, (<span class="hljs-keyword">void</span> *)Allen);
    pthread_join(tid, <span class="hljs-literal">NULL</span>);
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</code></pre>
<p>In this example, we want to pass more than one argument to the function, so we create a pointer point to a struct we have created, transfer it into (void *) and pass to function.
In function, we transfer the type of pointer to the real type, so that we can properly use it.</p>

                    
                    </section>
                
                
                </div>
            </div>
        </div>

        
        <a href="./solution-deadlock.html" class="navigation navigation-prev " aria-label="Previous page: Solution: Deadlock"><i class="fa fa-angle-left"></i></a>
        
        
        <a href="./example-sorting-common-integers-in-two-lists.html" class="navigation navigation-next " aria-label="Next page: Example: Sorting Common Integers in Two Lists"><i class="fa fa-angle-right"></i></a>
        
    </div>
</div>

        
<script src="gitbook/app.js"></script>

    
    <script src="gitbook/plugins/gitbook-plugin-search/lunr.min.js"></script>
    

    
    <script src="gitbook/plugins/gitbook-plugin-search/search.js"></script>
    

    
    <script src="gitbook/plugins/gitbook-plugin-sharing/buttons.js"></script>
    

    
    <script src="gitbook/plugins/gitbook-plugin-fontsettings/buttons.js"></script>
    

<script>
require(["gitbook"], function(gitbook) {
    var config = {"highlight":{},"search":{"maxIndexSize":1000000},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"fontsettings":{"theme":"white","family":"sans","size":2}};
    gitbook.start(config);
});
</script>

        
    </body>
    
</html>
